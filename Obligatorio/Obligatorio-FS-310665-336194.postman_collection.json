{
	"info": {
		"_postman_id": "8cfc67b0-7049-4c6f-a1df-16d8b0120d60",
		"name": "Obligatorio-FS-310665-336194-COMPLETA",
		"description": "Colección completa con todos los endpoints para el obligatorio de Full Stack",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "42449095"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Registro exitoso",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Juan Pérez\",\n  \"password\": \"123456\",\n  \"email\": \"usuario@ejemplo.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/signup",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"signup"
							]
						},
						"description": "Registro exitoso de un nuevo usuario"
					},
					"response": []
				},
				{
					"name": "Registro con datos incorrectos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"\",\n  \"password\": \"12\",\n  \"email\": \"email-invalido\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/signup",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"signup"
							]
						},
						"description": "Intento de registro con datos inválidos"
					},
					"response": []
				},
				{
					"name": "Registro usuario duplicado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Usuario Duplicado\",\n  \"password\": \"123456\",\n  \"email\": \"usuario@ejemplo.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/signup",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"signup"
							]
						},
						"description": "Intento de registro con email ya existente"
					},
					"response": []
				},
				{
					"name": "Login exitoso",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"pm.environment.set(\"token\", response.token);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"prueba11@ejemplo.com\",\n    \"password\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/login",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"login"
							]
						},
						"description": "Login exitoso que guarda el token"
					},
					"response": []
				},
				{
					"name": "Login con credenciales incorrectas",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"usuario@ejemplo.com\",\n    \"password\": \"password-incorrecto\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/login",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"login"
							]
						},
						"description": "Intento de login con credenciales incorrectas"
					},
					"response": []
				}
			],
			"description": "Endpoints para registro y login de usuarios"
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Upgrade PLUS → PREMIUM (exitoso)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    pm.environment.set(\"userProfile\", \"PREMIUM\");",
									"    console.log(\"Perfil actualizado a PREMIUM\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/users/upgrade-premium",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"users",
								"upgrade-premium"
							]
						},
						"description": "Actualiza el perfil del usuario de PLUS a PREMIUM"
					},
					"response": []
				},
				{
					"name": "Upgrade desde cuenta no PLUS (error)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token_premium}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/users/upgrade-premium",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"users",
								"upgrade-premium"
							]
						},
						"description": "Intento de upgrade desde una cuenta que ya es PREMIUM"
					},
					"response": []
				}
			],
			"description": "Gestión de usuarios y cambios de perfil"
		},
		{
			"name": "Routines",
			"item": [
				{
					"name": "Obtener categorías",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/categories",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"categories"
							]
						},
						"description": "Obtiene la lista de categorías disponibles para las rutinas"
					},
					"response": []
				},
				{
					"name": "Crear rutina (exitosa)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.environment.set(\"routineId\", response.rutina._id);",
									"    console.log(\"Rutina creada con ID:\", response.rutina._id);",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina de Fuerza - Tren Superior\",\n  \"description\": \"Rutina enfocada en el desarrollo de fuerza del tren superior\",\n  \"category\": \"FUERZA\",\n  \"exercises\": [\n    {\n      \"name\": \"Press de banca\",\n      \"sets\": 4,\n      \"reps\": 8,\n      \"weight\": 60,\n      \"category\": \"Pecho\"\n    },\n    {\n      \"name\": \"Dominadas\",\n      \"sets\": 3,\n      \"reps\": 10,\n      \"weight\": 0,\n      \"category\": \"Espalda\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Creación exitosa de una rutina"
					},
					"response": []
				},
				{
					"name": "Crear rutina (datos inválidos)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"\",\n  \"description\": \"Rutina sin nombre\",\n  \"category\": \"CATEGORIA_INEXISTENTE\",\n  \"exercises\": []\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Intento de crear rutina con datos inválidos"
					},
					"response": []
				},
				{
					"name": "Obtener rutinas del usuario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Obtiene todas las rutinas del usuario autenticado"
					},
					"response": []
				},
				{
					"name": "Obtener rutina por ID (propia)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/{{routineId}}",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"{{routineId}}"
							]
						},
						"description": "Obtiene una rutina específica del usuario autenticado"
					},
					"response": []
				},
				{
					"name": "Obtener rutina por ID (ajena - error 403)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/507f1f77bcf86cd799439011",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"507f1f77bcf86cd799439011"
							]
						},
						"description": "Intento de acceder a rutina de otro usuario"
					},
					"response": []
				},
				{
					"name": "Actualizar rutina (exitosa)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina de Fuerza - Tren Superior ACTUALIZADA\",\n  \"description\": \"Rutina actualizada con nuevos ejercicios\",\n  \"category\": \"FUERZA\",\n  \"exercises\": [\n    {\n      \"name\": \"Press de banca\",\n      \"sets\": 5,\n      \"reps\": 6,\n      \"weight\": 70,\n      \"category\": \"Pecho\"\n    },\n    {\n      \"name\": \"Dominadas\",\n      \"sets\": 4,\n      \"reps\": 8,\n      \"weight\": 10,\n      \"category\": \"Espalda\"\n    },\n    {\n      \"name\": \"Sentadillas\",\n      \"sets\": 4,\n      \"reps\": 12,\n      \"weight\": 80,\n      \"category\": \"Piernas\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/{{routineId}}",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"{{routineId}}"
							]
						},
						"description": "Actualización exitosa de una rutina existente"
					},
					"response": []
				},
				{
					"name": "Eliminar rutina (exitosa)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/{{routineId}}",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"{{routineId}}"
							]
						},
						"description": "Elimina una rutina del usuario autenticado"
					},
					"response": []
				},
				{
					"name": "Contar rutinas del usuario",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/routines/count/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								"count",
								""
							]
						},
						"description": "Cuenta el número total de rutinas del usuario"
					},
					"response": []
				}
			],
			"description": "CRUD completo de rutinas de ejercicios"
		},
		{
			"name": "Tests de Límites PLUS/PREMIUM",
			"item": [
				{
					"name": "Crear rutina 1 (PLUS)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina CARDIO 1\",\n  \"description\": \"Primera rutina de cardio\",\n  \"category\": \"CARDIO\",\n  \"exercises\": [\n    {\n      \"name\": \"Correr\",\n      \"sets\": 1,\n      \"reps\": 30,\n      \"weight\": 0,\n      \"muscle\": \"Cardio\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Crear rutina 1 siendo usuario PLUS"
					},
					"response": []
				},
				{
					"name": "Crear rutina 2 (PLUS)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina FLEXIBILIDAD 2\",\n  \"description\": \"Segunda rutina de flexibilidad\",\n  \"category\": \"FLEXIBILIDAD\",\n  \"exercises\": [\n    {\n      \"name\": \"Estiramiento\",\n      \"sets\": 3,\n      \"reps\": 1,\n      \"weight\": 0,\n      \"category\": \"Estiramiento\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Crear rutina 2 siendo usuario PLUS"
					},
					"response": []
				},
				{
					"name": "Crear rutina 3 (PLUS)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina FUNCIONAL 3\",\n  \"description\": \"Tercera rutina funcional\",\n  \"category\": \"FUNCIONAL\",\n  \"exercises\": [\n    {\n      \"name\": \"Burpees\",\n      \"sets\": 3,\n      \"reps\": 10,\n      \"weight\": 0,\n      \"category\": \"Funcional\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Crear rutina 3 siendo usuario PLUS"
					},
					"response": []
				},
				{
					"name": "Crear rutina 11 PLUS (error límite)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina 11 - Debería Fallar\",\n  \"description\": \"Esta rutina debería dar error por límite PLUS\",\n  \"category\": \"HIIT\",\n  \"exercises\": [\n    {\n      \"name\": \"Ejercicio que no se creará\",\n      \"sets\": 1,\n      \"reps\": 1,\n      \"weight\": 0,\n      \"category\": \"Test\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Intento de crear rutina 11 siendo PLUS (debería fallar)"
					},
					"response": []
				},
				{
					"name": "Upgrade a PREMIUM",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    pm.environment.set(\"userProfile\", \"PREMIUM\");",
									"    console.log(\"Usuario actualizado a PREMIUM - Sin límites\");",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{dev_base_url}}/users/upgrade-premium",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"users",
								"upgrade-premium"
							]
						},
						"description": "Actualizar usuario a PREMIUM para permitir rutinas ilimitadas"
					},
					"response": []
				},
				{
					"name": "Crear rutina 11 PREMIUM (exitosa)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Rutina 11 - PREMIUM Success\",\n  \"description\": \"Esta rutina debería crearse exitosamente con PREMIUM\",\n  \"category\": \"HIIT\",\n  \"exercises\": [\n    {\n      \"name\": \"HIIT Avanzado\",\n      \"sets\": 5,\n      \"reps\": 20,\n      \"weight\": 0,\n      \"category\": \"HIIT\"\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{dev_base_url}}/routines/",
							"host": [
								"{{dev_base_url}}"
							],
							"path": [
								"routines",
								""
							]
						},
						"description": "Crear rutina 11 siendo PREMIUM (debería ser exitosa)"
					},
					"response": []
				}
			],
			"description": "Tests específicos para validar límites de rutinas según perfil"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "dev_base_url",
			"value": "http://localhost:3000/api/v1",
			"type": "string",
			"description": "URL base para desarrollo local"
		},
		{
			"key": "prod_base_url",
			"value": "https://tu-app.vercel.app/api/v1",
			"type": "string",
			"description": "URL base para producción en Vercel"
		},
		{
			"key": "token",
			"value": "",
			"type": "string",
			"description": "JWT Token del usuario autenticado"
		},
		{
			"key": "routineId",
			"value": "",
			"type": "string",
			"description": "ID de rutina para tests CRUD"
		},
		{
			"key": "userProfile",
			"value": "PLUS",
			"type": "string",
			"description": "Perfil actual del usuario (PLUS/PREMIUM)"
		}
	]
}